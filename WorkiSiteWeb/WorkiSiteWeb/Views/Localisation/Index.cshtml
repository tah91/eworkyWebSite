@model WorkiSiteWeb.Models.LocalisationListViewModel

@section HeadContent
{
	<title>@Html.WorkiTitle(WorkiResources.Views.Localisation.LocalisationString.Index) </title>
}


    
<script src="http://maps.google.com/maps/api/js?sensor=true&region=FR" type="text/javascript"></script>
<script src="/Scripts/jquery-1.5.2.min.js" type="text/javascript"></script>
<script src="/Scripts/WorkiMapBis.js" type="text/javascript"></script>

<h2>@WorkiResources.Views.Localisation.LocalisationString.SearchAWorkplace</h2>

<div id="searchBox">
    Entrer un endroit: @Html.TextBox("Location") 
    Wifi: @Html.CheckBox("Wifi") 
    <input id="search" type="submit" value="Rechercher" />
    @Html.ActionLink(WorkiResources.Views.Home.HomeString.MoreCriterias, "FullSearch", "Search")
</div>
<div>
    <div id="mapDivLeft">
        <div id="theMap" />
    </div>
    <div id="mapDivRight">
        <div id="localisationList"></div>
    </div>
</div>
<script type="text/javascript">
    function OnNavigation(sender, args) {
        WorkiMap.FindAllLocalisations();
    }

    $(document).ready(function () {
        WorkiMap.LoadMap();
        WorkiMap.FindAllLocalisations();
    });

    $("#Location").keypress(function (evt) {
        if (evt.which == 13) {
            ValidateAndFindLocalisations();
        }
    });
    $("#search").click(function (evt) {
        ValidateAndFindLocalisations();
    });

    function ValidateAndFindLocalisations() {
        var where = $.trim($("#Location").val());
        var wifi = $('#Wifi').is(':checked');
        alert(wifi);
        if (where.length < 1)
            return;
        WorkiMap.FindLocalisationsGivenLocation(where, wifi);
    }

</script>

<div class="pager">
    @Html.PageLinks(Model.PagingInfo, x => Url.Action("Index", new { page = x }))
</div>


