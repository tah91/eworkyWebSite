@model Worki.Data.Models.LocalisationOfferViewModel

@section HeadContent
{
    <link href="@Url.VersionedContent(Links.Content.Search_min_css)" rel="stylesheet" type="text/css" />
    <link href="@Url.VersionedContent(Links.Content.LocalisationDetail_min_css)" rel="stylesheet" type="text/css" />
    <link href="@Url.VersionedContent(Links.Content.rateit_min_css)" rel="stylesheet" type="text/css" />	
    <link href="@Url.VersionedContent(Links.Content.Profil_min_css)" rel="stylesheet" type="text/css"/>
}

<a class="blue" href="@Model.Localisation.GetDetailFullUrl(Url)">@Worki.Resources.Views.Offer.OfferString.BackToLocalisation</a>

<div class="detailContent">
	<div class="localisationDetailLeft blockContainer float-left">
		@foreach (var offer in Model.Offers)
		{
	  		<div class="contentBlock">
                <div class="float-left">
                    <h3 class="blue">@offer.Name</h3>
                </div>
                <div class="float-right bold orange">
                    @offer.GetAvailabilityDisplay()
                </div>
                <div class="clear">
                </div>
				@if (offer.OfferFiles.Count > 0)
				{
				<div class="offerGallery">
					@foreach (var item in offer.OfferFiles)
					{
						<a href="@ControllerHelpers.GetUserImagePath(item.FileName, false, PictureData.GetFolder(ProviderType.Offer))" class="hidden">
            				<img title="@offer.Name" alt="@offer.Name" src="@ControllerHelpers.GetUserImagePath(item.FileName, false, PictureData.GetFolder(ProviderType.Offer))"/>
        				</a>                        
					}
				</div>
				<div class="clear"></div>
				}
				@if (offer.OfferFeatures.Count() == 0)
				{
					<div class="italic">@Worki.Resources.Views.Offer.OfferString.InfoUnknown</div>
				}
				else
				{
				<div class="featureTag">
					<ul>
					@foreach (var item in offer.OfferFeatures)
					{
						<li>@FeatureHelper.Display(item)</li>
					}
					</ul>
				</div> 
				<div class="clear"></div>
				}
				<div class="float-right">
					<div class="priceDisplay float-left bold orange">
						TODO@*@offer.GetPriceDisplay()*@
					</div>
					@if (offer.HasProduct)
					{
						if (offer.CanHaveQuotation && offer.IsQuotable)
						{
							<div class="buttonStd buttonBlue linkImg float-right">
								@Html.ActionLink(Worki.Resources.Views.Offer.OfferString.AskDevis, MVC.Quotation.Create(offer.Id))
							</div>
						}
						else if (offer.CanHaveBooking && offer.IsBookable)
						{
							<div class="buttonStd buttonBlue linkImg float-right">
								@Html.ActionLink(Worki.Resources.Views.Localisation.LocalisationString.BookIt, MVC.Booking.Create(offer.Id))
							</div>
						}
						<div class="clear"></div>
					}
				</div>
				<div class="clear"></div>
			</div> 
		}
	</div>
	<div class="localisationDetailRight blockContainer float-right">
	@Html.Partial(MVC.Localisation.Views._LocalisationInfos, Model.Localisation)
	</div>
	<div class="clear"></div>
</div>

@section ScriptContent
{
    <script type="text/javascript">
        require(["@Url.VersionedContent(Links.Content.galleria.galleria_1_2_4_js)"], function () {
            // Load the classic theme
            Galleria.loadTheme('/Content/Galleria/galleria.classic.js');

            $('.offerGallery').galleria({
               	//width: 600,
               	height: 350,
               	showInfo: false
               });
        });
        require(["@Url.VersionedContent(Links.Scripts.jquery_rateit_js)"]);
    </script>
}
