@model WorkiSiteWeb.Models.ProfilFormViewModel

@section HeadContent
{
	<title>@Html.WorkiTitle(WorkiResources.Views.Profile.ProfileString.EditProfile)</title>
    <link href="@Url.Content(Links.Content.jquery_ui_1_8_12_custom_css) " rel="stylesheet" type="text/css" />
    <link href="@Url.Content(Links.Content.Profil_css) " rel="stylesheet" type="text/css" />
}


<div class="borderContainer">
    @RazorHelpers.TitleDiv(WorkiResources.Views.Profile.ProfileString.EditProfile, "Blue")
    @using (Html.BeginForm(MVC.Profil.ActionNames.Edit, MVC.Profil.Name, null, FormMethod.Post, new { enctype = "multipart/form-data", id="profilEditForm" }))
    {
        @Html.AntiForgeryToken()
        <div class="avatarEditor float-left">
            <div class="avatarContainer borderedImg">
                @RazorHelpers.CenterImage(MiscHelpers.GetUserImagePath(Model.Member.MemberMainData.Avatar), Model.Member.GetDisplayName())
            </div>
            <input type="file" name="Avatar" accept="image/*"/>
        </div>
        <div class="profilData float-left">
			<h3 class="blue">@WorkiResources.Views.Profile.ProfileString.PersonalInfo</h3>
            <table>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.Profile) <span class="blue">*</span>
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.DropDownList("Member.MemberMainData.Profile", Model.ProfileSelectTypes, new { @class = "profileSelect" })
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.Civility)<span class="blue">*</span>
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.DropDownList("Member.MemberMainData.Civility", Model.CivilitySelectTypes)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @WorkiResources.Models.Contact.Contact.LastName<span class="blue">*</span>
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.LastName)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @WorkiResources.Models.Contact.Contact.FirstName<span class="blue">*</span>
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.FirstName)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.BirthDate)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBox("Member.MemberMainData.BirthDate", String.Format("{0:dd/MM/yyyy}", Model.Member.MemberMainData.BirthDate), new { @class = "dp" })
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.PhoneNumber)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.PhoneNumber)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.City)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.City)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.PostalCode)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.PostalCode)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.Country)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.Country)
                        </div>
                    </td>
                </tr>
				<tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.Description)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextAreaFor(m => m.Member.MemberMainData.Description)
                        </div>
                    </td>
                </tr>
			</table>
			<h3 class="blue">@WorkiResources.Views.Profile.ProfileString.ProfessionalInfo</h3>
			<table>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.CompanyName)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.CompanyName, new { placeholder = "Ex : fonction, entreprise, etc." })
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.WorkCity)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.WorkCity)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.WorkPostalCode)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.WorkPostalCode)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.WorkCountry)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.WorkCountry)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.FavoritePlaces)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextAreaFor(m => m.Member.MemberMainData.FavoritePlaces)
                        </div>
                    </td>
                </tr>
			</table>
			<h3 class="blue">@WorkiResources.Views.Profile.ProfileString.SocialNetwork</h3>
			<table>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.Facebook)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.Facebook, new { placeholder = "Votre page Facebook" })
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.Twitter)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.Twitter, new { placeholder = "Votre pseudo twitter" })
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.Linkedin)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.Linkedin, new { placeholder = "Votre page LinkedIn" })
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(m => m.Member.MemberMainData.Viadeo)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(m => m.Member.MemberMainData.Viadeo, new { placeholder = "Votre page Viadeo" })
                        </div>
                    </td>
                </tr>       
                <tr>
                    <td>
                    </td>
                    <td>
                        <div class="editor-field">
                            <input type="submit" class="btn_blue imageBtn" value="Valider"/>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    }
</div>

@section ScriptContent
{
    <script src="@MiscHelpers.jquery " type="text/javascript"></script>
    <script src="@MiscHelpers.jqueryui " type="text/javascript"></script>
    <script src="@Url.Content(Links.Scripts.date_js) " type="text/javascript"></script>
    @Html.Partial(MVC.Shared.Views._CufonScript)
    <script type="text/javascript">
        $(document).ready(function () {
            $.datepicker.regional['fr'] = {
                closeText: 'Fermer',
                prevText: '&#x3c;Préc',
                nextText: 'Suiv&#x3e;',
                currentText: 'Courant',
                monthNames: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'],
                monthNamesShort: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun', 'Jul', 'Aoû', 'Sep', 'Oct', 'Nov', 'Déc'],
                dayNames: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'],
                dayNamesShort: ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'],
                dayNamesMin: ['Di', 'Lu', 'Ma', 'Me', 'Je', 'Ve', 'Sa'],
                weekHeader: 'Sm',
                dateFormat: 'dd/mm/yy',
                firstDay: 1,
                isRTL: false,
                showMonthAfterYear: false,
                yearSuffix: ''
            };
            $.datepicker.setDefaults($.datepicker.regional['fr']);
            $("#datepicker").datepicker();
            $(".dp").datepicker({
                changeMonth: true,
                changeYear: true,
                yearRange: '1911:2000'
            });
        });
        $("#profilEditForm").submit(function () {
            var val = $("#Member_MemberMainData_BirthDate").val();
            var date = Date.parseExact(val, "dd/MM/yyyy");
            var newVal = date.toString('MM/dd/yyyy');
            $("#Member_MemberMainData_BirthDate").val(newVal);
            return true;
        });
    </script>
}
