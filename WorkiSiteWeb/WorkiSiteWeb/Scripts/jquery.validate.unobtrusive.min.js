/*
** Unobtrusive validation support library for jQuery and jQuery Validate
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(a){var b=a.validator,c,e="unobtrusiveValidation";function j(m,n,o){m.rules[n]=o;if(m.message){m.messages[n]=m.message}}function k(m){return m.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function f(m){return m.substr(0,m.lastIndexOf(".")+1)}function d(n,m){if(n.indexOf("*.")===0){n=n.replace("*.",m)}return n}function g(n,o){var m=a(this).find("[data-valmsg-for='"+o[0].name+"']"),p=a.parseJSON(m.attr("data-valmsg-replace"))!==false;m.removeClass("field-validation-valid").addClass("field-validation-error");n.data("unobtrusiveContainer",m);if(p){m.empty();n.removeClass("input-validation-error").appendTo(m)}else{n.hide()}}function h(n,p){var m=a(this).find("[data-valmsg-summary=true]"),o=m.find("ul");if(o&&o.length&&p.errorList.length){o.empty();m.addClass("validation-summary-errors").removeClass("validation-summary-valid");a.each(p.errorList,function(){a("<li />").html(this.message).appendTo(o)})}}function i(n){var m=n.data("unobtrusiveContainer"),o=a.parseJSON(m.attr("data-valmsg-replace"));if(m){m.addClass("field-validation-valid").removeClass("field-validation-error");n.removeData("unobtrusiveContainer");if(o){m.empty()}}}function l(n){var m=a(n),o=m.data(e);if(!o){o={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:a.proxy(g,n),invalidHandler:a.proxy(h,n),messages:{},rules:{},success:a.proxy(i,n)},attachValidation:function(){m.validate(this.options)},validate:function(){m.validate();return m.valid()}};m.data(e,o)}return o}b.unobtrusive={adapters:[],parseElement:function(n,r){var m=a(n),o=m.parents("form")[0],s,q,p;if(!o){return}s=l(o);s.options.rules[n.name]=q={};s.options.messages[n.name]=p={};a.each(this.adapters,function(){var v="data-val-"+this.name,t=m.attr(v),u={};if(t!==undefined){v+="-";a.each(this.params,function(){u[this]=m.attr(v+this)});this.adapt({element:n,form:o,message:t,params:u,rules:q,messages:p})}});jQuery.extend(q,{__dummy__:true});if(!r){s.attachValidation()}},parse:function(m){a(m).find(":input[data-val=true]").each(function(){b.unobtrusive.parseElement(this,true)});a("form").each(function(){var n=l(this);if(n){n.attachValidation()}})}};c=b.unobtrusive.adapters;c.add=function(m,o,n){if(!n){n=o;o=[]}this.push({name:m,params:o,adapt:n});return this};c.addBool=function(m,n){return this.add(m,function(o){j(o,n||m,true)})};c.addMinMax=function(m,r,o,q,p,n){return this.add(m,[p||"min",n||"max"],function(u){var t=u.params.min,s=u.params.max;if(t&&s){j(u,q,[t,s])}else{if(t){j(u,r,t)}else{if(s){j(u,o,s)}}}})};c.addSingleVal=function(m,n,o){return this.add(m,[n||"val"],function(p){j(p,o||m,p.params[n])})};b.addMethod("__dummy__",function(o,m,n){return true});b.addMethod("regex",function(p,m,o){var n;if(this.optional(m)){return true}n=new RegExp(o).exec(p);return(n&&(n.index===0)&&(n[0].length===p.length))});c.addSingleVal("accept","exts").addSingleVal("regex","pattern");c.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");c.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");c.add("equalto",["other"],function(o){var q=f(o.element.name),p=o.params.other,n=d(p,q),m=a(o.form).find(":input[name="+n+"]")[0];j(o,"equalTo",m)});c.add("required",function(m){if(m.element.tagName.toUpperCase()!=="INPUT"||m.element.type.toUpperCase()!=="CHECKBOX"){j(m,"required",true)}});c.add("remote",["url","type","additionalfields"],function(m){var o={url:m.params.url,type:m.params.type||"GET",data:{}},n=f(m.element.name);a.each(k(m.params.additionalfields||m.element.name),function(q,p){var r=d(p,n);o.data[r]=function(){return a(m.form).find(":input[name='"+r+"']").val()}});j(m,"remote",o)});a(function(){b.unobtrusive.parse(document)})}(jQuery));