function WorkiMapSearch(t,s,p,q,w,u,v,o){var g=t;var f=s;var b=p;var c=q;var k=w;var h=u==null?true:u;var i=v==null?true:v;var a=o==null?true:o;var l=null;var n=null;var e=null;var j=false;var d=window.History;var m=d.getRootUrl();d.Adapter.bind(window,"statechange",function(){var y=d.getState(),z=y.url,x=z.replace(m,"");if(y.data.toProcess!=null||y.data.toProcess==false){return}$.ajax({url:z,success:k})});_bounds_changed=function(){var x=this.getBounds();var y=x.getNorthEast().lat();var z=x.getNorthEast().lng();var A=x.getSouthWest().lat();var B=x.getSouthWest().lng();$("#Criteria_NorthEastLat").val(y);$("#Criteria_NorthEastLng").val(z);$("#Criteria_SouthWestLat").val(A);$("#Criteria_SouthWestLng").val(B);if(!j){$("#searchFormReset form").submit()}};_markerDetailPopUp=function(){var x=this.map;var y=this;$.ajax({url:g,data:{id:this.get("id")},success:function(z){if(e){e.close()}e=new google.maps.InfoWindow({content:z});e.open(x,y);$("div.rateit").rateit()}})};_markerDetailPage=function(){var x=this.map;var y=this;$.ajax({url:f,data:{id:this.get("id")},success:function(z){window.location.href=z}})};_askForResults=function(){j=false};_goToTop=function(){$("html, body").animate({scrollTop:0},0)};_pushResults=function(A,B){var x=new google.maps.LatLngBounds();this.Map.ClearMap();if(!c){this.Map.CenterSearchResults(A)}for(var y in B){var z=c?_markerDetailPopUp:_markerDetailPage;this.Map.AddMarker(B[y].latitude,B[y].longitude,B[y].name,B[y].id,x,z)}if(B.length>=2&&!c){this.Map.FitBoundsSearchResults(x)}if(c){this.Map.SetCluster()}j=true};_applyResults=function(x){_goToTop.apply();d.pushState({toProcess:true},"",x.href);event.preventDefault();return false};var r=new ErrorBuilder("searchFormReset","searchFormError");_onSubmitSuccess=function(x){k(x);d.pushState({toProcess:false},"",x.url)};_submitData=function(){_goToTop.apply();AppAjax(b,"POST",$("#searchFormReset form").serializeArray(),_onSubmitSuccess,r.ErrorFunc)};this.Map=l;this.WorkiGeoCoder=n;this.IsBig=c;this.Bounds_changed=_bounds_changed;this.AskForResults=_askForResults;this.ApplyResults=_applyResults;this.SubmitData=_submitData;this.PushResults=_pushResults;this.NeedAutocomplete=h;this.NeedMap=i;this.AjaxSubmit=a};