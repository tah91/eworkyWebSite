function WorkiMapSearch(p,o,l,m,s,q,r){var e=p;var d=o;var a=l;var b=m;var i=s;var f=q==null?true:q;var g=r==null?true:r;var j=null;var k=null;var c=null;var k=null;var h=false;_bounds_changed=function(){var t=this.getBounds();var u=t.getNorthEast().lat();var v=t.getNorthEast().lng();var w=t.getSouthWest().lat();var x=t.getSouthWest().lng();$("#Criteria_NorthEastLat").val(u);$("#Criteria_NorthEastLng").val(v);$("#Criteria_SouthWestLat").val(w);$("#Criteria_SouthWestLng").val(x);if(!h){$("#searchFormReset form").submit()}};_markerDetailPopUp=function(){var t=this.map;var u=this;$.ajax({url:e,data:{id:this.get("id")},success:function(v){if(infowindow){infowindow.close()}infowindow=new google.maps.InfoWindow({content:v});infowindow.open(t,u);$("div.rateit").rateit()}})};_markerDetailPage=function(){var t=this.map;var u=this;$.ajax({url:a,data:{id:this.get("id")},success:function(v){window.location.href=v}})};_askForResults=function(){h=false};_goToTop=function(){$("html, body").animate({scrollTop:0},0)};_pushResults=function(w,x){var t=new google.maps.LatLngBounds();this.Map.ClearMap();if(!b){this.Map.CenterSearchResults(w)}for(var u in x){var v=b?_markerDetailPopUp:_markerDetailPage;this.Map.AddMarker(x[u].latitude,x[u].longitude,x[u].name,x[u].id,t,v)}if(x.length>=2&&!b){this.Map.FitBoundsSearchResults(t)}if(b){this.Map.SetCluster()}h=true};_applyResults=function(){_goToTop.apply();$.ajax({url:this.href,success:i})};var n=new ErrorBuilder("searchFormReset","searchFormError");_submitData=function(){_goToTop.apply();AppAjax(a,"POST",$("#searchFormReset form").serializeArray(),i,n.ErrorFunc)};this.Map=j;this.WorkiGeoCoder=k;this.IsBig=b;this.Bounds_changed=_bounds_changed;this.AskForResults=_askForResults;this.ApplyResults=_applyResults;this.SubmitData=_submitData;this.PushResults=_pushResults;this.NeedAutocomplete=f;this.NeedMap=g};