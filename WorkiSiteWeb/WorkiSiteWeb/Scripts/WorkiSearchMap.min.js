function WorkiMapSearch(r,q,n,o,u,s,t,m){var f=r;var e=q;var b=n;var c=o;var j=u;var g=s==null?true:s;var h=t==null?true:t;var a=m==null?true:m;var k=null;var l=null;var d=null;var i=false;_bounds_changed=function(){var v=this.getBounds();var w=v.getNorthEast().lat();var x=v.getNorthEast().lng();var y=v.getSouthWest().lat();var z=v.getSouthWest().lng();$("#Criteria_NorthEastLat").val(w);$("#Criteria_NorthEastLng").val(x);$("#Criteria_SouthWestLat").val(y);$("#Criteria_SouthWestLng").val(z);if(!i){$("#searchFormReset form").submit()}};_markerDetailPopUp=function(){var v=this.map;var w=this;$.ajax({url:f,data:{id:this.get("id")},success:function(x){if(d){d.close()}d=new google.maps.InfoWindow({content:x});d.open(v,w);$("div.rateit").rateit()}})};_markerDetailPage=function(){var v=this.map;var w=this;$.ajax({url:b,data:{id:this.get("id")},success:function(x){window.location.href=x}})};_askForResults=function(){i=false};_goToTop=function(){$("html, body").animate({scrollTop:0},0)};_pushResults=function(y,z){var v=new google.maps.LatLngBounds();this.Map.ClearMap();if(!c){this.Map.CenterSearchResults(y)}for(var w in z){var x=c?_markerDetailPopUp:_markerDetailPage;this.Map.AddMarker(z[w].latitude,z[w].longitude,z[w].name,z[w].id,v,x)}if(z.length>=2&&!c){this.Map.FitBoundsSearchResults(v)}if(c){this.Map.SetCluster()}i=true};_applyResults=function(v){_goToTop.apply();$.ajax({url:v.href,success:j})};var p=new ErrorBuilder("searchFormReset","searchFormError");_submitData=function(){_goToTop.apply();AppAjax(b,"POST",$("#searchFormReset form").serializeArray(),j,p.ErrorFunc)};this.Map=k;this.WorkiGeoCoder=l;this.IsBig=c;this.Bounds_changed=_bounds_changed;this.AskForResults=_askForResults;this.ApplyResults=_applyResults;this.SubmitData=_submitData;this.PushResults=_pushResults;this.NeedAutocomplete=g;this.NeedMap=h;this.AjaxSubmit=a};