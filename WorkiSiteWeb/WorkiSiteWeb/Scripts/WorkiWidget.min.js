var eworkyClass=function(){this.initialize.apply(this,arguments)};eworkyClass.prototype={initialize:function(){this.widgetDict={};this.iframeDomain="http://taff.coworky.fr/widget/localisation"},postInitialize:function(){this.initializeWidgets()},initializeWidgets:function(){var e=this.findWidgets();for(var a=0;a<e.length;d++){var c=e[a];var b=a+1;this.widgetDict[b]=new eworkyButtonClass(c,b,this.iframeDomain)}},findWidgets:function(){var c=document.links;var e="eworky-widget";var f=[];for(var b=0;b<c.length;b++){var a=c[b];if(a.className.indexOf(e)>=0){f.push(a)}}return f},listen:function(){return eworkyUtils.listen.apply(eworkyUtils,arguments)}};var eworkyUtilsClass=function(){this.initialize.apply(this,arguments)};eworkyUtilsClass.prototype={initialize:function(){this.eventMap={}},getUrlVars:function(f){var e={},b;f=f||window.location.href;var c=f.slice(f.indexOf("?")+1).split("&");for(var a=0;a<c.length;a++){b=c[a].split("=");e[b[0]]=decodeURIComponent(b[1])}return e},parseData:function(b){var f={};for(var c=0;c<b.attributes.length;c++){var a=b.attributes[c];if(a.name.indexOf("data-")==0){var e=a.name.replace("data-","");var g=a.value;f[e]=g}}return f},ready:function(){if(!eworkyUtils.isReady){if(!document.body){return setTimeout(eworkyUtils.ready,13)}eworkyUtils.isReady=true;try{eworky=new eworkyClass();if(typeof(eworkyAsyncLoaded)!="undefined"){eworkyAsyncLoaded()}eworky.postInitialize()}catch(a){if(typeof(console)!="undefined"){console.log(a)}}}},bindReady:function(){if(eworkyUtils.readyBound){return}eworkyUtils.readyBound=true;if(document.readyState==="complete"){return eworkyUtils.ready()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",eworkyUtils.ready,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var b=false;try{b=window.frameElement==null}catch(a){}if(document.documentElement.doScroll&&b){doScrollCheck()}}}},listen:function(a,b){if(!(a in this.eventMap)){this.eventMap[a]=[]}this.eventMap[a].push(b)},fire:function(b){if(b in this.eventMap){var a=this.eventMap[b];for(var e=0;e<a.length;e++){var c=a[e];c.apply(c,arguments)}}}};eworkyUtils=new eworkyUtilsClass();var eworkyButtonClass=function(){this.initialize.apply(this,arguments)};eworkyButtonClass.prototype={initialize:function(b,e,a){this.element=b;this.data=eworkyUtils.parseData(this.element);this.buttonId=e;var c=this.element.className.split(" ");var f=c[1].replace("eworky-","");this.type=f;this.iframeDomain=a;eworkyUtils.fire("pre_button_init",this.type,this.data,this);if(f=="finder"||f=="detail"){this.width=800;this.height=7500}this.baseFormat();eworkyUtils.fire("post_button_init",this,b,e,a)},getIframeUrl:function(){var a=this.iframeDomain+"/?widget_type="+this.type+this.getPopupQueryString();return a},getPopupQueryString:function(){var b="";for(dataKey in this.data){var a=this.data[dataKey];if(a){b+="&"+dataKey+"="+encodeURIComponent(a)}}return b},baseFormat:function(){var a=document.createElement("IFRAME");a.src=this.getIframeUrl();a.frameBorder=0;a.marginWidth=0;a.marginHeight=0;a.width=this.width+"px";a.height=this.height+"px";a.scrolling="yes";a.id="eworky_widget_"+this.buttonId;a.name="eworky_widget_"+this.buttonId;this.element.parentNode.replaceChild(a,this.element);this.element=a}};if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);eworkyUtils.ready()}}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);eworkyUtils.ready()}}}}function doScrollCheck(){if(eworkyUtils.isReady){return}try{document.documentElement.doScroll("left")}catch(a){setTimeout(doScrollCheck,1);return}eworkyUtils.ready()}function loadScript(e,a){var b=document.getElementsByTagName("head")[0];var c=document.createElement("script");c.type="text/javascript";c.src=e;c.onreadystatechange=a;c.onload=a;b.appendChild(c)}var myPrettyCode=function(){eworkyUtils.bindReady()};loadScript("http://taff.coworky.fr/Scripts/easyXDM.js",myPrettyCode);