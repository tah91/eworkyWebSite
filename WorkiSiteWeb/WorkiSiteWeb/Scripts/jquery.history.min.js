window.JSON||(window.JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i){return"null"}gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1){h[c]=str(c,i)||"null"}return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1){d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}}else{for(d in i){Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}}return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number"){for(d=0;d<c;d+=1){indent+=" "}}else{typeof c=="string"&&(indent=c)}rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number"){return str("",{"":a})}throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object"){for(c in e){Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c])}}return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")})}(),function(e,f){var g=e.History=e.History||{},h=e.jQuery;if(typeof g.Adapter!="undefined"){throw new Error("History.js Adapter has already been loaded...")}g.Adapter={bind:function(d,i,j){h(d).bind(i,j)},trigger:function(d,i,j){h(d).trigger(i,j)},extractEventData:function(b,i,j){var k=i&&i.originalEvent&&i.originalEvent[b]||j&&j[b]||f;return k},onDomLoad:function(b){h(b)}},typeof g.init!="undefined"&&g.init()}(window),function(h,i){var j=h.document,k=h.setTimeout||k,l=h.clearTimeout||l,m=h.setInterval||m,n=h.History=h.History||{};if(typeof n.initHtml4!="undefined"){throw new Error("History.js HTML4 Support has already been loaded...")}n.initHtml4=function(){if(typeof n.initHtml4.initialized!="undefined"){return !1}n.initHtml4.initialized=!0,n.enabled=!0,n.savedHashes=[],n.isLastHash=function(d){var e=n.getHashByIndex(),f;return f=d===e,f},n.saveHash=function(b){return n.isLastHash(b)?!1:(n.savedHashes.push(b),!0)},n.getHashByIndex=function(c){var d=null;return typeof c=="undefined"?d=n.savedHashes[n.savedHashes.length-1]:c<0?d=n.savedHashes[n.savedHashes.length+c]:d=n.savedHashes[c],d},n.discardedHashes={},n.discardedStates={},n.discardState=function(f,g,o){var p=n.getHashByState(f),q;return q={discardedState:f,backState:o,forwardState:g},n.discardedStates[p]=q,!0},n.discardHash=function(e,f,g){var o={discardedHash:e,backState:g,forwardState:f};return n.discardedHashes[e]=o,!0},n.discardedState=function(d){var e=n.getHashByState(d),f;return f=n.discardedStates[e]||!1,f},n.discardedHash=function(c){var d=n.discardedHashes[c]||!1;return d},n.recycleState=function(c){var d=n.getHashByState(c);return n.discardedState(c)&&delete n.discardedStates[d],!0},n.emulated.hashChange&&(n.hashChangeInit=function(){n.checkerFunction=null;var a="",c,f,g,o;return n.isInternetExplorer()?(c="historyjs-iframe",f=j.createElement("iframe"),f.setAttribute("id",c),f.style.display="none",j.body.appendChild(f),f.contentWindow.document.open(),f.contentWindow.document.close(),g="",o=!1,n.checkerFunction=function(){if(o){return !1}o=!0;var b=n.getHash()||"",e=n.unescapeHash(f.contentWindow.document.location.hash)||"";return b!==a?(a=b,e!==b&&(g=e=b,f.contentWindow.document.open(),f.contentWindow.document.close(),f.contentWindow.document.location.hash=n.escapeHash(b)),n.Adapter.trigger(h,"hashchange")):e!==g&&(g=e,n.setHash(e,!1)),o=!1,!0}):n.checkerFunction=function(){var b=n.getHash();return b!==a&&(a=b,n.Adapter.trigger(h,"hashchange")),!0},n.intervalList.push(m(n.checkerFunction,n.options.hashChangeInterval)),!0},n.Adapter.onDomLoad(n.hashChangeInit)),n.emulated.pushState&&(n.onHashChange=function(a){var c=a&&a.newURL||j.location.href,g=n.getHashByUrl(c),o=null,p=null,q=null,r;return n.isLastHash(g)?(n.busy(!1),!1):(n.doubleCheckComplete(),n.saveHash(g),g&&n.isTraditionalAnchor(g)?(n.Adapter.trigger(h,"anchorchange"),n.busy(!1),!1):(o=n.extractState(n.getFullUrl(g||j.location.href,!1),!0),n.isLastSavedState(o)?(n.busy(!1),!1):(p=n.getHashByState(o),r=n.discardedState(o),r?(n.getHashByIndex(-2)===n.getHashByState(r.forwardState)?n.back(!1):n.forward(!1),!1):(n.pushState(o.data,o.title,o.url,!1),!0))))},n.Adapter.bind(h,"hashchange",n.onHashChange),n.pushState=function(a,c,g,o){if(n.getHashByUrl(g)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(o!==!1&&n.busy()){return n.pushQueue({scope:n,callback:n.pushState,args:arguments,queue:o}),!1}n.busy(!0);var p=n.createStateObject(a,c,g),q=n.getHashByState(p),r=n.getState(!1),s=n.getHashByState(r),t=n.getHash();return n.storeState(p),n.expectedStateId=p.id,n.recycleState(p),n.setTitle(p),q===s?(n.busy(!1),!1):q!==t&&q!==n.getShortUrl(j.location.href)?(n.setHash(q,!1),!1):(n.saveState(p),n.Adapter.trigger(h,"statechange"),n.busy(!1),!0)},n.replaceState=function(g,o,p,q){if(n.getHashByUrl(p)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(q!==!1&&n.busy()){return n.pushQueue({scope:n,callback:n.replaceState,args:arguments,queue:q}),!1}n.busy(!0);var r=n.createStateObject(g,o,p),s=n.getState(!1),t=n.getStateByIndex(-2);return n.discardState(s,r,t),n.pushState(r.data,r.title,r.url,!1),!0}),n.emulated.pushState&&n.getHash()&&!n.emulated.hashChange&&n.Adapter.onDomLoad(function(){n.Adapter.trigger(h,"hashchange")})},typeof n.init!="undefined"&&n.init()}(window),function(o,p){var q=o.console||p,r=o.document,s=o.navigator,t=o.sessionStorage||!1,u=o.setTimeout,v=o.clearTimeout,w=o.setInterval,x=o.clearInterval,y=o.JSON,z=o.alert,A=o.History=o.History||{},B=o.history;y.stringify=y.stringify||y.encode,y.parse=y.parse||y.decode;if(typeof A.init!="undefined"){throw new Error("History.js Core has already been loaded...")}A.init=function(){return typeof A.Adapter=="undefined"?!1:(typeof A.initCore!="undefined"&&A.initCore(),typeof A.initHtml4!="undefined"&&A.initHtml4(),!0)},A.initCore=function(){if(typeof A.initCore.initialized!="undefined"){return !1}A.initCore.initialized=!0,A.options=A.options||{},A.options.hashChangeInterval=A.options.hashChangeInterval||100,A.options.safariPollInterval=A.options.safariPollInterval||500,A.options.doubleCheckInterval=A.options.doubleCheckInterval||500,A.options.storeInterval=A.options.storeInterval||1000,A.options.busyDelay=A.options.busyDelay||250,A.options.debug=A.options.debug||!1,A.options.initialTitle=A.options.initialTitle||r.title,A.intervalList=[],A.clearAllIntervals=function(){var c,d=A.intervalList;if(typeof d!="undefined"&&d!==null){for(c=0;c<d.length;c++){x(d[c])}A.intervalList=null}},A.debug=function(){(A.options.debug||!1)&&A.log.apply(A,arguments)},A.log=function(){var c=typeof q!="undefined"&&typeof q.log!="undefined"&&typeof q.log.apply!="undefined",d=r.getElementById("log"),k,l,m,n,C;c?(n=Array.prototype.slice.call(arguments),k=n.shift(),typeof q.debug!="undefined"?q.debug.apply(q,[k,n]):q.log.apply(q,[k,n])):k="\n"+arguments[0]+"\n";for(l=1,m=arguments.length;l<m;++l){C=arguments[l];if(typeof C=="object"&&typeof y!="undefined"){try{C=y.stringify(C)}catch(D){}}k+="\n"+C+"\n"}return d?(d.value+=k+"\n-----\n",d.scrollTop=d.scrollHeight-d.clientHeight):c||z(k),!0},A.getInternetExplorerMajorVersion=function(){var c=A.getInternetExplorerMajorVersion.cached=typeof A.getInternetExplorerMajorVersion.cached!="undefined"?A.getInternetExplorerMajorVersion.cached:function(){var d=3,e=r.createElement("div"),f=e.getElementsByTagName("i");while((e.innerHTML="<!--[if gt IE "+ ++d+"]><i></i><![endif]-->")&&f[0]){}return d>4?d:!1}();return c},A.isInternetExplorer=function(){var c=A.isInternetExplorer.cached=typeof A.isInternetExplorer.cached!="undefined"?A.isInternetExplorer.cached:Boolean(A.getInternetExplorerMajorVersion());return c},A.emulated={pushState:!Boolean(o.history&&o.history.pushState&&o.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(s.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(s.userAgent)),hashChange:Boolean(!("onhashchange" in o||"onhashchange" in r)||A.isInternetExplorer()&&A.getInternetExplorerMajorVersion()<8)},A.enabled=!A.emulated.pushState,A.bugs={setHash:Boolean(!A.emulated.pushState&&s.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(s.userAgent)),safariPoll:Boolean(!A.emulated.pushState&&s.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(s.userAgent)),ieDoubleCheck:Boolean(A.isInternetExplorer()&&A.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(A.isInternetExplorer()&&A.getInternetExplorerMajorVersion()<7)},A.isEmptyObject=function(c){for(var d in c){return !1}return !0},A.cloneObject=function(d){var e,f;return d?(e=y.stringify(d),f=y.parse(e)):f={},f},A.getRootUrl=function(){var c=r.location.protocol+"//"+(r.location.hostname||r.location.host);if(r.location.port||!1){c+=":"+r.location.port}return c+="/",c},A.getBaseHref=function(){var d=r.getElementsByTagName("base"),e=null,f="";return d.length===1&&(e=d[0],f=e.href.replace(/[^\/]+$/,"")),f=f.replace(/\/+$/,""),f&&(f+="/"),f},A.getBaseUrl=function(){var c=A.getBaseHref()||A.getBasePageUrl()||A.getRootUrl();return c},A.getPageUrl=function(){var d=A.getState(!1,!1),e=(d||{}).url||r.location.href,f;return f=e.replace(/\/+$/,"").replace(/[^\/]+$/,function(g,h,i){return/\./.test(g)?g:g+"/"}),f},A.getBasePageUrl=function(){var c=r.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(d,e,f){return/[^\/]$/.test(d)?"":d}).replace(/\/+$/,"")+"/";return c},A.getFullUrl=function(e,f){var g=e,h=e.substring(0,1);return f=typeof f=="undefined"?!0:f,/[a-z]+\:\/\//.test(e)||(h==="/"?g=A.getRootUrl()+e.replace(/^\/+/,""):h==="#"?g=A.getPageUrl().replace(/#.*/,"")+e:h==="?"?g=A.getPageUrl().replace(/[\?#].*/,"")+e:f?g=A.getBaseUrl()+e.replace(/^(\.\/)+/,""):g=A.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),g.replace(/\#$/,"")},A.getShortUrl=function(e){var f=e,g=A.getBaseUrl(),h=A.getRootUrl();return A.emulated.pushState&&(f=f.replace(g,"")),f=f.replace(h,"/"),A.isTraditionalAnchor(f)&&(f="./"+f),f=f.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),f},A.store={},A.idToState=A.idToState||{},A.stateToId=A.stateToId||{},A.urlToId=A.urlToId||{},A.storedStates=A.storedStates||[],A.savedStates=A.savedStates||[],A.normalizeStore=function(){A.store.idToState=A.store.idToState||{},A.store.urlToId=A.store.urlToId||{},A.store.stateToId=A.store.stateToId||{}},A.getState=function(d,e){typeof d=="undefined"&&(d=!0),typeof e=="undefined"&&(e=!0);var f=A.getLastSavedState();return !f&&e&&(f=A.createStateObject()),d&&(f=A.cloneObject(f),f.url=f.cleanUrl||f.url),f},A.getIdByState=function(d){var e=A.extractId(d.url),f;if(!e){f=A.getStateString(d);if(typeof A.stateToId[f]!="undefined"){e=A.stateToId[f]}else{if(typeof A.store.stateToId[f]!="undefined"){e=A.store.stateToId[f]}else{for(;;){e=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof A.idToState[e]=="undefined"&&typeof A.store.idToState[e]=="undefined"){break}}A.stateToId[f]=e,A.idToState[e]=d}}}return e},A.normalizeState=function(d){var e,f;if(!d||typeof d!="object"){d={}}if(typeof d.normalized!="undefined"){return d}if(!d.data||typeof d.data!="object"){d.data={}}e={},e.normalized=!0,e.title=d.title||"",e.url=A.getFullUrl(A.unescapeString(d.url||r.location.href)),e.hash=A.getShortUrl(e.url),e.data=A.cloneObject(d.data),e.id=A.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,f=!A.isEmptyObject(e.data);if(e.title||f){e.hash=A.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id}return e.hashedUrl=A.getFullUrl(e.hash),(A.emulated.pushState||A.bugs.safariPoll)&&A.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e},A.createStateObject=function(e,f,g){var h={data:e,title:f,url:g};return h=A.normalizeState(h),h},A.getStateById=function(d){d=String(d);var e=A.idToState[d]||A.store.idToState[d]||p;return e},A.getStateString=function(e){var f,g,h;return f=A.normalizeState(e),g={data:f.data,title:e.title,url:e.url},h=y.stringify(g),h},A.getStateId=function(d){var e,f;return e=A.normalizeState(d),f=e.id,f},A.getHashByState=function(d){var e,f;return e=A.normalizeState(d),f=e.hash,f},A.extractId=function(e){var f,g,h;return g=/(.*)\&_suid=([0-9]+)$/.exec(e),h=g?g[1]||e:e,f=g?String(g[2]||""):"",f||!1},A.isTraditionalAnchor=function(c){var d=!/[\/\?\.]/.test(c);return d},A.extractState=function(f,g){var h=null,i,j;return g=g||!1,i=A.extractId(f),i&&(h=A.getStateById(i)),h||(j=A.getFullUrl(f),i=A.getIdByUrl(j)||!1,i&&(h=A.getStateById(i)),!h&&g&&!A.isTraditionalAnchor(f)&&(h=A.createStateObject(null,null,j))),h},A.getIdByUrl=function(d){var e=A.urlToId[d]||A.store.urlToId[d]||p;return e},A.getLastSavedState=function(){return A.savedStates[A.savedStates.length-1]||p},A.getLastStoredState=function(){return A.storedStates[A.storedStates.length-1]||p},A.hasUrlDuplicate=function(d){var e=!1,f;return f=A.extractState(d.url),e=f&&f.id!==d.id,e},A.storeState=function(c){return A.urlToId[c.url]=c.id,A.storedStates.push(A.cloneObject(c)),c},A.isLastSavedState=function(f){var g=!1,h,i,j;return A.savedStates.length&&(h=f.id,i=A.getLastSavedState(),j=i.id,g=h===j),g},A.saveState=function(c){return A.isLastSavedState(c)?!1:(A.savedStates.push(A.cloneObject(c)),!0)},A.getStateByIndex=function(c){var d=null;return typeof c=="undefined"?d=A.savedStates[A.savedStates.length-1]:c<0?d=A.savedStates[A.savedStates.length+c]:d=A.savedStates[c],d},A.getHash=function(){var c=A.unescapeHash(r.location.hash);return c},A.unescapeString=function(e){var f=e,g;for(;;){g=o.unescape(f);if(g===f){break}f=g}return f},A.unescapeHash=function(c){var d=A.normalizeHash(c);return d=A.unescapeString(d),d},A.normalizeHash=function(c){var d=c.replace(/[^#]*#/,"").replace(/#.*/,"");return d},A.setHash=function(d,g){var h,i,j;return g!==!1&&A.busy()?(A.pushQueue({scope:A,callback:A.setHash,args:arguments,queue:g}),!1):(h=A.escapeHash(d),A.busy(!0),i=A.extractState(d,!0),i&&!A.emulated.pushState?A.pushState(i.data,i.title,i.url,!1):r.location.hash!==h&&(A.bugs.setHash?(j=A.getPageUrl(),A.pushState(null,null,j+"#"+h,!1)):r.location.hash=h),A)},A.escapeHash=function(d){var e=A.normalizeHash(d);return e=o.escape(e),A.bugs.hashEscape||(e=e.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),e},A.getHashByUrl=function(c){var d=String(c).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return d=A.unescapeHash(d),d},A.setTitle=function(d){var f=d.title,g;f||(g=A.getStateByIndex(0),g&&g.url===d.url&&(f=g.title||A.options.initialTitle));try{r.getElementsByTagName("title")[0].innerHTML=f.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(h){}return r.title=f,A},A.queues=[],A.busy=function(c){typeof c!="undefined"?A.busy.flag=c:typeof A.busy.flag=="undefined"&&(A.busy.flag=!1);if(!A.busy.flag){v(A.busy.timeout);var d=function(){var e,f,g;if(A.busy.flag){return}for(e=A.queues.length-1;e>=0;--e){f=A.queues[e];if(f.length===0){continue}g=f.shift(),A.fireQueueItem(g),A.busy.timeout=u(d,A.options.busyDelay)}};A.busy.timeout=u(d,A.options.busyDelay)}return A.busy.flag},A.busy.flag=!1,A.fireQueueItem=function(c){return c.callback.apply(c.scope||A,c.args||[])},A.pushQueue=function(c){return A.queues[c.queue||0]=A.queues[c.queue||0]||[],A.queues[c.queue||0].push(c),A},A.queue=function(c,d){return typeof c=="function"&&(c={callback:c}),typeof d!="undefined"&&(c.queue=d),A.busy()?A.pushQueue(c):A.fireQueueItem(c),A},A.clearQueue=function(){return A.busy.flag=!1,A.queues=[],A},A.stateChanged=!1,A.doubleChecker=!1,A.doubleCheckComplete=function(){return A.stateChanged=!0,A.doubleCheckClear(),A},A.doubleCheckClear=function(){return A.doubleChecker&&(v(A.doubleChecker),A.doubleChecker=!1),A},A.doubleCheck=function(c){return A.stateChanged=!1,A.doubleCheckClear(),A.bugs.ieDoubleCheck&&(A.doubleChecker=u(function(){return A.doubleCheckClear(),A.stateChanged||c(),!0},A.options.doubleCheckInterval)),A},A.safariStatePoll=function(){var d=A.extractState(r.location.href),e;if(!A.isLastSavedState(d)){e=d}else{return}return e||(e=A.createStateObject()),A.Adapter.trigger(o,"popstate"),A},A.back=function(c){return c!==!1&&A.busy()?(A.pushQueue({scope:A,callback:A.back,args:arguments,queue:c}),!1):(A.busy(!0),A.doubleCheck(function(){A.back(!1)}),B.go(-1),!0)},A.forward=function(c){return c!==!1&&A.busy()?(A.pushQueue({scope:A,callback:A.forward,args:arguments,queue:c}),!1):(A.busy(!0),A.doubleCheck(function(){A.forward(!1)}),B.go(1),!0)},A.go=function(d,e){var f;if(d>0){for(f=1;f<=d;++f){A.forward(e)}}else{if(!(d<0)){throw new Error("History.go: History.go requires a positive or negative integer passed.")}for(f=-1;f>=d;--f){A.back(e)}}return A};if(A.emulated.pushState){var a=function(){};A.pushState=A.pushState||a,A.replaceState=A.replaceState||a}else{A.onPopState=function(d,i){var j=!1,k=!1,l,m;return A.doubleCheckComplete(),l=A.getHash(),l?(m=A.extractState(l||r.location.href,!0),m?A.replaceState(m.data,m.title,m.url,!1):(A.Adapter.trigger(o,"anchorchange"),A.busy(!1)),A.expectedStateId=!1,!1):(j=A.Adapter.extractEventData("state",d,i)||!1,j?k=A.getStateById(j):A.expectedStateId?k=A.getStateById(A.expectedStateId):k=A.extractState(r.location.href),k||(k=A.createStateObject(null,null,r.location.href)),A.expectedStateId=!1,A.isLastSavedState(k)?(A.busy(!1),!1):(A.storeState(k),A.saveState(k),A.setTitle(k),A.Adapter.trigger(o,"statechange"),A.busy(!1),!0))},A.Adapter.bind(o,"popstate",A.onPopState),A.pushState=function(g,h,i,j){if(A.getHashByUrl(i)&&A.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(j!==!1&&A.busy()){return A.pushQueue({scope:A,callback:A.pushState,args:arguments,queue:j}),!1}A.busy(!0);var k=A.createStateObject(g,h,i);return A.isLastSavedState(k)?A.busy(!1):(A.storeState(k),A.expectedStateId=k.id,B.pushState(k.id,k.title,k.url),A.Adapter.trigger(o,"popstate")),!0},A.replaceState=function(g,h,i,j){if(A.getHashByUrl(i)&&A.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(j!==!1&&A.busy()){return A.pushQueue({scope:A,callback:A.replaceState,args:arguments,queue:j}),!1}A.busy(!0);var k=A.createStateObject(g,h,i);return A.isLastSavedState(k)?A.busy(!1):(A.storeState(k),A.expectedStateId=k.id,B.replaceState(k.id,k.title,k.url),A.Adapter.trigger(o,"popstate")),!0}}if(t){try{A.store=y.parse(t.getItem("History.store"))||{}}catch(b){A.store={}}A.normalizeStore()}else{A.store={},A.normalizeStore()}A.Adapter.bind(o,"beforeunload",A.clearAllIntervals),A.Adapter.bind(o,"unload",A.clearAllIntervals),A.saveState(A.storeState(A.extractState(r.location.href,!0))),t&&(A.onUnload=function(){var d,e;try{d=y.parse(t.getItem("History.store"))||{}}catch(f){d={}}d.idToState=d.idToState||{},d.urlToId=d.urlToId||{},d.stateToId=d.stateToId||{};for(e in A.idToState){if(!A.idToState.hasOwnProperty(e)){continue}d.idToState[e]=A.idToState[e]}for(e in A.urlToId){if(!A.urlToId.hasOwnProperty(e)){continue}d.urlToId[e]=A.urlToId[e]}for(e in A.stateToId){if(!A.stateToId.hasOwnProperty(e)){continue}d.stateToId[e]=A.stateToId[e]}A.store=d,A.normalizeStore(),t.setItem("History.store",y.stringify(d))},A.intervalList.push(w(A.onUnload,A.options.storeInterval)),A.Adapter.bind(o,"beforeunload",A.onUnload),A.Adapter.bind(o,"unload",A.onUnload));if(!A.emulated.pushState){A.bugs.safariPoll&&A.intervalList.push(w(A.safariStatePoll,A.options.safariPollInterval));if(s.vendor==="Apple Computer, Inc."||(s.appCodeName||"")==="Mozilla"){A.Adapter.bind(o,"hashchange",function(){A.Adapter.trigger(o,"popstate")}),A.getHash()&&A.Adapter.onDomLoad(function(){A.Adapter.trigger(o,"hashchange")})}}},A.init()}(window);