Type.registerNamespace("Sys.Mvc");Sys.Mvc.$create_AjaxOptions=function Sys_Mvc_AjaxOptions(){return{}};Sys.Mvc.InsertionMode=function(){};Sys.Mvc.InsertionMode.prototype={replace:0,insertBefore:1,insertAfter:2};Sys.Mvc.InsertionMode.registerEnum("Sys.Mvc.InsertionMode",false);Sys.Mvc.AjaxContext=function Sys_Mvc_AjaxContext(c,d,b,a){this._request=c;this._updateTarget=d;this._loadingElement=b;this._insertionMode=a};Sys.Mvc.AjaxContext.prototype={_insertionMode:0,_loadingElement:null,_response:null,_request:null,_updateTarget:null,get_data:function Sys_Mvc_AjaxContext$get_data(){if(this._response){return this._response.get_responseData()}else{return null}},get_insertionMode:function Sys_Mvc_AjaxContext$get_insertionMode(){return this._insertionMode},get_loadingElement:function Sys_Mvc_AjaxContext$get_loadingElement(){return this._loadingElement},get_object:function Sys_Mvc_AjaxContext$get_object(){var a=this.get_response();return(a)?a.get_object():null},get_response:function Sys_Mvc_AjaxContext$get_response(){return this._response},set_response:function Sys_Mvc_AjaxContext$set_response(a){this._response=a;return a},get_request:function Sys_Mvc_AjaxContext$get_request(){return this._request},get_updateTarget:function Sys_Mvc_AjaxContext$get_updateTarget(){return this._updateTarget}};Sys.Mvc.AsyncHyperlink=function Sys_Mvc_AsyncHyperlink(){};Sys.Mvc.AsyncHyperlink.handleClick=function Sys_Mvc_AsyncHyperlink$handleClick(b,c,a){c.preventDefault();Sys.Mvc.MvcHelpers._asyncRequest(b.href,"post","",b,a)};Sys.Mvc.MvcHelpers=function Sys_Mvc_MvcHelpers(){};Sys.Mvc.MvcHelpers._serializeSubmitButton=function Sys_Mvc_MvcHelpers$_serializeSubmitButton(a,e,f){if(a.disabled){return null}var d=a.name;if(d){var g=a.tagName.toUpperCase();var b=encodeURIComponent(d);var c=a;if(g==="INPUT"){var h=c.type;if(h==="submit"){return b+"="+encodeURIComponent(c.value)}else{if(h==="image"){return b+".x="+e+"&"+b+".y="+f}}}else{if((g==="BUTTON")&&(d.length)&&(c.type==="submit")){return b+"="+encodeURIComponent(c.value)}}}return null};Sys.Mvc.MvcHelpers._serializeForm=function Sys_Mvc_MvcHelpers$_serializeForm(d){var f=d.elements;var e=new Sys.StringBuilder();var b=f.length;for(var g=0;g<b;g++){var c=f[g];var l=c.name;if(!l||!l.length){continue}var p=c.tagName.toUpperCase();if(p==="INPUT"){var h=c;var q=h.type;if((q==="text")||(q==="password")||(q==="hidden")||(((q==="checkbox")||(q==="radio"))&&c.checked)){e.append(encodeURIComponent(l));e.append("=");e.append(encodeURIComponent(h.value));e.append("&")}}else{if(p==="SELECT"){var o=c;var m=o.options.length;for(var k=0;k<m;k++){var n=o.options[k];if(n.selected){e.append(encodeURIComponent(l));e.append("=");e.append(encodeURIComponent(n.value));e.append("&")}}}else{if(p==="TEXTAREA"){e.append(encodeURIComponent(l));e.append("=");e.append(encodeURIComponent((c.value)));e.append("&")}}}}var a=d._additionalInput;if(a){e.append(a);e.append("&")}return e.toString()};Sys.Mvc.MvcHelpers._asyncRequest=function Sys_Mvc_MvcHelpers$_asyncRequest(l,m,c,i,b){if(b.confirm){if(!confirm(b.confirm)){return}}if(b.url){l=b.url}if(b.httpMethod){m=b.httpMethod}if(c.length>0&&!c.endsWith("&")){c+="&"}c+="X-Requested-With=XMLHttpRequest";var k=m.toUpperCase();var e=(k==="GET"||k==="POST");if(!e){c+="&";c+="X-HTTP-Method-Override="+k}var h="";if(k==="GET"||k==="DELETE"){if(l.indexOf("?")>-1){if(!l.endsWith("&")){l+="&"}l+=c}else{l+="?";l+=c}}else{h=c}var g=new Sys.Net.WebRequest();g.set_url(l);if(e){g.set_httpVerb(m)}else{g.set_httpVerb("POST");g.get_headers()["X-HTTP-Method-Override"]=k}g.set_body(h);if(m.toUpperCase()==="PUT"){g.get_headers()["Content-Type"]="application/x-www-form-urlencoded;"}g.get_headers()["X-Requested-With"]="XMLHttpRequest";var j=null;if(b.updateTargetId){j=$get(b.updateTargetId)}var f=null;if(b.loadingElementId){f=$get(b.loadingElementId)}var a=new Sys.Mvc.AjaxContext(g,j,f,b.insertionMode);var d=true;if(b.onBegin){d=b.onBegin(a)!==false}if(f){Sys.UI.DomElement.setVisible(a.get_loadingElement(),true)}if(d){g.add_completed(Function.createDelegate(null,function(n){Sys.Mvc.MvcHelpers._onComplete(g,b,a)}));g.invoke()}};Sys.Mvc.MvcHelpers._onComplete=function Sys_Mvc_MvcHelpers$_onComplete(request,ajaxOptions,ajaxContext){ajaxContext.set_response(request.get_executor());if(ajaxOptions.onComplete&&ajaxOptions.onComplete(ajaxContext)===false){return}var statusCode=ajaxContext.get_response().get_statusCode();if((statusCode>=200&&statusCode<300)||statusCode===304||statusCode===1223){if(statusCode!==204&&statusCode!==304&&statusCode!==1223){var contentType=ajaxContext.get_response().getResponseHeader("Content-Type");if((contentType)&&(contentType.indexOf("application/x-javascript")!==-1)){eval(ajaxContext.get_data())}else{Sys.Mvc.MvcHelpers.updateDomElement(ajaxContext.get_updateTarget(),ajaxContext.get_insertionMode(),ajaxContext.get_data())}}if(ajaxOptions.onSuccess){ajaxOptions.onSuccess(ajaxContext)}}else{if(ajaxOptions.onFailure){ajaxOptions.onFailure(ajaxContext)}}if(ajaxContext.get_loadingElement()){Sys.UI.DomElement.setVisible(ajaxContext.get_loadingElement(),false)}};Sys.Mvc.MvcHelpers.updateDomElement=function Sys_Mvc_MvcHelpers$updateDomElement(c,b,a){if(c){switch(b){case Sys.Mvc.InsertionMode.replace:c.innerHTML=a;break;case Sys.Mvc.InsertionMode.insertBefore:if(a&&a.length>0){c.innerHTML=a+c.innerHTML.trimStart()}break;case Sys.Mvc.InsertionMode.insertAfter:if(a&&a.length>0){c.innerHTML=c.innerHTML.trimEnd()+a}break}}};Sys.Mvc.AsyncForm=function Sys_Mvc_AsyncForm(){};Sys.Mvc.AsyncForm.handleClick=function Sys_Mvc_AsyncForm$handleClick(c,b){var a=Sys.Mvc.MvcHelpers._serializeSubmitButton(b.target,b.offsetX,b.offsetY);c._additionalInput=a};Sys.Mvc.AsyncForm.handleSubmit=function Sys_Mvc_AsyncForm$handleSubmit(e,d,a){d.preventDefault();var g=e.validationCallbacks;if(g){for(var f=0;f<g.length;f++){var c=g[f];if(!c()){return}}}var b=Sys.Mvc.MvcHelpers._serializeForm(e);Sys.Mvc.MvcHelpers._asyncRequest(e.action,e.method||"post",b,e,a)};Sys.Mvc.AjaxContext.registerClass("Sys.Mvc.AjaxContext");Sys.Mvc.AsyncHyperlink.registerClass("Sys.Mvc.AsyncHyperlink");Sys.Mvc.MvcHelpers.registerClass("Sys.Mvc.MvcHelpers");Sys.Mvc.AsyncForm.registerClass("Sys.Mvc.AsyncForm");